function allInit(){kit.getCookie("contentText")?(fillInRemeText(),mdConverter()):(writeMdText(`
欢迎来到在线markdown，请在这里输入markdown语法  

比如:

# 你好，我是标题

## 你好，我是二级标题

你好，我是正文  
正文换行需要结尾打两个空格
如果不打空格，就不换行

你好,我是LATEX  

<center>
$ln({1}) =3ln({2})$ <br><br>  

$int_{4}^{5} 6^2 dx=7$
</center>  

<br>
<br>

我下面是分割线

---

| 我      | 是    | 
| -----   | ---- |
| 表      |   格  |

我是 **强调语句**

[我是链接](https://bigonion.cn)
![我是图片](http://bigonion.cn/background/wallheaven.jfif)
`),mdConverter())}function initAll(){enableFastKeyEvent()}async function mdConverter(e=!0){let t=getMdText(),n=markedParse(t);preViewText(n=await latexParse(n=await latexParse2(n))),e&&restoreText(),hljs.highlightAll()}function insertStr(e,t,n){return e.slice(0,t)+n+e.slice(t)}function getRegIndex(e,t){let n=Array.from(e.matchAll(t),e=>e.index);return n}function latexParse2(e,t=!0){return new Promise(n=>{let r=/(?<=(\$\$))(.+?)(?=(\$\$))/g;n(e?e=e.replace(/\$\$.*?\$\$/g,e=>{if(!(e=e.match(r)[0]))return"";var n=katex.renderToString(e,{throwOnError:!1});return t&&(n=`<center>${n}</center>`),n}):e)})}function latexParse(e){return new Promise(t=>{let n=/\$.*?\$/g,r=/(?<=\$)(.+?)(?=\$)/g,l=[],i=e,o=e.match(n);getRegIndex(e,n);let a="";if(o)try{o.forEach((e,t)=>{(e=e.match(r))?l[t]=katex.renderToString(e[0],{throwOnError:!1}):l[t]="<span style='color:#cc0000;'>ERR_NULL</span>"}),e=(e=e.replace(n,"<!temp?.!>")).split("<!temp?.!>"),l=[...l,""];for(let c=0;c<=e.length-1;c++)a+=e[c]+l[c],c==e.length-1&&t(a)}catch(s){return console.log(s),5}else t(i)})}function markedParse(e){return marked.parse(e)}function md2html(e){var t=new showdown.Converter;return t.setOption("tasklists",!0),t.setOption("moreStyling",!0),t.setOption("completeHTMLDocument",!0),t.setOption("smoothLivePreview",!0),t.setOption("simplifiedAutoLink",!0),t.setOption("tables",!0),t.makeHtml(e)}function writeMdText(e){document.getElementById("md-area").value=e}function getMdText(){return document.getElementById("md-area").value}function preViewText(e){document.getElementById("view-area").innerHTML=e}function getRememberText(){let e=kit.getCookie("contentText").replace(/\<\? br \?\>/g,"\n");return e.replace(/\<\? semicolon \?\>/g,";")}function restoreText(){let e=getMdText();e=(e=e.replace(/\n/g,"<? br ?>")).replace(/\;/g,"<? semicolon ?>"),kit.setCookie("contentText",e,30,"/","md.bigonion.cn"),kit.setCookie("contentText",e,30,"/","127.0.0.1")}function fillInRemeText(){let e=getRememberText();return writeMdText(e),e}function myPrint(){let e=document.getElementById("view-area").innerHTML;window.document.body.innerHTML=`<div class="markdown-body">${e}</div>`,window.print(),location.reload()}function enableFastKeyEvent(){document.addEventListener("keydown",e=>{e.stopPropagation();let t=document.getElementById("md-area");e.ctrlKey&&"b"==e.key&&replaceSelection(t,"**","**"),"c"==e.key&&e.altKey&&replaceSelection(t,"<center>","</center>")})}function replaceSelection(e,t,n){var r=e.selectionStart,l=e.selectionEnd;if(console.log(r,l),r==l)return"";temp=e.value.substr(0,r)+t+e.value.substring(r,l)+n+e.value.substring(l,e.value.length),e.value=temp,console.log(e.value.substring(r,l)),console.log(e.value.substring(r,l).length),e.setSelectionRange(r,l+t.length+n.length)}window.onload=()=>{allInit()},initAll();